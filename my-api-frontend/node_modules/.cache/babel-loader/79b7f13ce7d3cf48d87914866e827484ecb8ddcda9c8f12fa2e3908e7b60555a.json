{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Antosz\\\\my-api-frontend\\\\src\\\\ClientF\\\\ClientLister.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ClientService from './ClientService';\nimport ListHeader from '../components/ListHeader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ClientLister = () => {\n  _s();\n  const [clients, setClients] = useState([]);\n  const [displayedClients, setDisplayedClients] = useState([]);\n  const [filters, setFilters] = useState({\n    name: '',\n    address: '',\n    email: ''\n  });\n  const [sortConfig, setSortConfig] = useState({\n    key: 'name',\n    direction: 'asc'\n  });\n\n  // Fetch all clients once when the component mounts\n  useEffect(() => {\n    ClientService.getAll().then(response => {\n      setClients(response.data);\n      setDisplayedClients(response.data);\n    }).catch(error => console.error(error));\n  }, []);\n  const handleDelete = clientId => {\n    ClientService.delete(clientId).then(() => {\n      const updatedClients = clients.filter(client => client.clientId !== clientId);\n      setClients(updatedClients);\n      applyFiltersAndSorting(updatedClients);\n    }).catch(error => console.error(\"Error deleting client:\", error));\n  };\n  const handleFilterChange = (key, value) => {\n    const updatedFilters = {\n      ...filters,\n      [key]: value\n    };\n    setFilters(updatedFilters);\n    applyFiltersAndSorting(clients, updatedFilters, sortConfig);\n  };\n  const handleSort = key => {\n    const direction = sortConfig.key === key && sortConfig.direction === 'asc' ? 'desc' : 'asc';\n    const updatedSortConfig = {\n      key,\n      direction\n    };\n    setSortConfig(updatedSortConfig);\n    applyFiltersAndSorting(clients, filters, updatedSortConfig);\n  };\n  const applyFiltersAndSorting = (data, filters = filters, sortConfig = sortConfig) => {\n    let filteredClients = data;\n\n    // Apply filtering\n    filteredClients = filteredClients.filter(client => Object.keys(filters).every(key => client[key].toString().toLowerCase().includes(filters[key].toLowerCase())));\n\n    // Apply sorting\n    filteredClients = filteredClients.sort((a, b) => {\n      const order = sortConfig.direction === 'asc' ? 1 : -1;\n      if (a[sortConfig.key] < b[sortConfig.key]) return -1 * order;\n      if (a[sortConfig.key] > b[sortConfig.key]) return 1 * order;\n      return 0;\n    });\n    setDisplayedClients(filteredClients);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"list-page\",\n    children: [/*#__PURE__*/_jsxDEV(ListHeader, {\n      headers: [{\n        key: 'name',\n        label: 'Name'\n      }, {\n        key: 'address',\n        label: 'Address'\n      }, {\n        key: 'email',\n        label: 'Email'\n      }, {\n        key: 'phoneNumber',\n        label: 'Phone Number'\n      }],\n      onFilter: handleFilterChange,\n      onSort: handleSort,\n      filters: filters\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table\",\n      children: displayedClients.map(client => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field\",\n          children: client.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field\",\n          children: client.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field\",\n          children: client.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field\",\n          children: client.phoneNumber\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modify-button\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete-button\",\n            onClick: () => handleDelete(client.clientId),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)]\n      }, client.clientId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(ClientLister, \"I4kte4pd2RCG5d+3sxHHAvPfG64=\");\n_c = ClientLister;\nexport default ClientLister;\nvar _c;\n$RefreshReg$(_c, \"ClientLister\");","map":{"version":3,"names":["React","useState","useEffect","ClientService","ListHeader","jsxDEV","_jsxDEV","ClientLister","_s","clients","setClients","displayedClients","setDisplayedClients","filters","setFilters","name","address","email","sortConfig","setSortConfig","key","direction","getAll","then","response","data","catch","error","console","handleDelete","clientId","delete","updatedClients","filter","client","applyFiltersAndSorting","handleFilterChange","value","updatedFilters","handleSort","updatedSortConfig","filteredClients","Object","keys","every","toString","toLowerCase","includes","sort","a","b","order","className","children","headers","label","onFilter","onSort","fileName","_jsxFileName","lineNumber","columnNumber","map","phoneNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Antosz/my-api-frontend/src/ClientF/ClientLister.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ClientService from './ClientService';\r\nimport ListHeader from '../components/ListHeader';\r\n\r\nconst ClientLister = () => {\r\n  const [clients, setClients] = useState([]);\r\n  const [displayedClients, setDisplayedClients] = useState([]);\r\n  const [filters, setFilters] = useState({\r\n    name: '',\r\n    address: '',\r\n    email: '',\r\n  });\r\n  const [sortConfig, setSortConfig] = useState({ key: 'name', direction: 'asc' });\r\n\r\n  // Fetch all clients once when the component mounts\r\n  useEffect(() => {\r\n    ClientService.getAll()\r\n      .then(response => {\r\n        setClients(response.data);\r\n        setDisplayedClients(response.data);\r\n      })\r\n      .catch(error => console.error(error));\r\n  }, []);\r\n\r\n  const handleDelete = (clientId) => {\r\n    ClientService.delete(clientId)\r\n      .then(() => {\r\n        const updatedClients = clients.filter(client => client.clientId !== clientId);\r\n        setClients(updatedClients);\r\n        applyFiltersAndSorting(updatedClients);\r\n      })\r\n      .catch(error => console.error(\"Error deleting client:\", error));\r\n  };\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const updatedFilters = { ...filters, [key]: value };\r\n    setFilters(updatedFilters);\r\n    applyFiltersAndSorting(clients, updatedFilters, sortConfig);\r\n  };\r\n\r\n  const handleSort = (key) => {\r\n    const direction = sortConfig.key === key && sortConfig.direction === 'asc' ? 'desc' : 'asc';\r\n    const updatedSortConfig = { key, direction };\r\n    setSortConfig(updatedSortConfig);\r\n    applyFiltersAndSorting(clients, filters, updatedSortConfig);\r\n  };\r\n\r\n  const applyFiltersAndSorting = (data, filters = filters, sortConfig = sortConfig) => {\r\n    let filteredClients = data;\r\n\r\n    // Apply filtering\r\n    filteredClients = filteredClients.filter(client =>\r\n      Object.keys(filters).every(key =>\r\n        client[key].toString().toLowerCase().includes(filters[key].toLowerCase())\r\n      )\r\n    );\r\n\r\n    // Apply sorting\r\n    filteredClients = filteredClients.sort((a, b) => {\r\n      const order = sortConfig.direction === 'asc' ? 1 : -1;\r\n      if (a[sortConfig.key] < b[sortConfig.key]) return -1 * order;\r\n      if (a[sortConfig.key] > b[sortConfig.key]) return 1 * order;\r\n      return 0;\r\n    });\r\n\r\n    setDisplayedClients(filteredClients);\r\n  };\r\n\r\n  return (\r\n    <div className=\"list-page\">\r\n      <ListHeader\r\n        headers={[\r\n          { key: 'name', label: 'Name' },\r\n          { key: 'address', label: 'Address' },\r\n          { key: 'email', label: 'Email' },\r\n          { key: 'phoneNumber', label: 'Phone Number' },\r\n        ]}\r\n        onFilter={handleFilterChange}\r\n        onSort={handleSort}\r\n        filters={filters}\r\n      />\r\n      <div className=\"table\">\r\n        {displayedClients.map(client => (\r\n          <div key={client.clientId} className=\"table-row\">\r\n            <div className=\"form-field\">{client.name}</div>\r\n            <div className=\"form-field\">{client.address}</div>\r\n            <div className=\"form-field\">{client.email}</div>\r\n            <div className=\"form-field\">{client.phoneNumber}</div>\r\n            <div className=\"form-field\">\r\n              <button className=\"modify-button\">Edit</button>\r\n              <button className=\"delete-button\" onClick={() => handleDelete(client.clientId)}>Delete</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientLister;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}